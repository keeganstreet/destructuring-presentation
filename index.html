<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Destructuring</title>
    <link rel="stylesheet" type="text/css" href="build/build.css">
  </head>
  <body>
    <article>
      <section style="background-image:url('images/Mirador-Building-by-MVRDV-and-Blanca-Lleo-photo-Luis-Garcia-by-Axel-de-Stampa.gif');" class="bg-img">
        <h1>Destructuring</h1>
        <!-- Background image from http://www.archdaily.com/512262/gifs-turn-architecture-into-animated-art-->
      </section>
      <section>
        <h2>Using ES6 today</h2>
        <h3>Modern browsers</h3>
        <p>Edge 13 (84%), Firefox 44 (74%), Chrome 48 (65%), Safari 9 (54%)</p>
        <h3>Compilers</h3>
        <p>Babel (71%), Traceur (59%)</p>
        <h3>Polyfills</h3>
        <p>core-js (included with Babel), es6-shim</p>
        <p class="small">ES6 coverage stats sourced from <a href="https://kangax.github.io/compat-table/es6/">https://kangax.github.io/compat-table/es6/</a> on 16 November 2015.</p>
      </section>
      <section>
        <h2>Using ES6 today</h2>
        <h3>Modern browsers</h3>
        <p>Object proxies, let/const</p>
        <h3>Compilers</h3>
        <p>Destructuring, default function parameters</p>
        <h3>Polyfills</h3>
        <p>Promises, new methods on Math, Array, etc</p>
        <!-- Compilers and polyfills actually support some features even better than the browsers.-->
        <!-- Some nice things about using Destructuring:-->
        <!-- - Support in Babel is pretty much complete (the only reason its not 100% is because destructuring can be used in combination with other ES6 features)-->
        <!-- - There is no performance hit. Destructuing assignments written in ES6 and compiled to ES5 will run just as fast as your original ES5.-->
      </section>
      <section>
        <h2>Babel in Middleman</h2>
        <h3><a href="https://github.com/vast/middleman-es6">https://github.com/vast/middleman-es6</a></h3>
        <ul>
          <li>A Middleman (Sprockets) extension</li>
          <li>Uses official Ruby-Babel bridge</li>
          <li>Just change the extension of any applicable JS files to .js.es6</li>
        </ul>
      </section>
      <section>
        <h2>Destructuring arrays<br>[] = [];</h2>
      </section>
      <section>
        <pre><code class="language-javascript">var contact = [
  'http://www.deloitte.com',
  '550 Bourke Street, Melbourne',
  '+61 3 9671 7000'
];

// ES5
var url = contact[0],
  address = contact[1],
  phone = contact[2];
  
// ES6
var [url, address, phone] = contact;</code></pre>
        <!-- - more concise-->
        <!-- - easier to read-->
      </section>
      <section>
        <h2>Swap two variables</h2>
        <!-- Bit of a gimmick really-->
        <pre><code class="language-javascript">var fruit = 'zucchini',
  vegetable = 'apple';
  
// ES5
var temp = fruit;
fruit = vegetable;
vegetable = temp;
delete temp;

// ES6
[fruit, vegetable] = [vegetable, fruit];
</code></pre>
      </section>
      <section>
        <h2>Nested arrays</h2>
        <pre class="small-code"><code class="language-javascript">// ES5
var ageGroups = [
  ['18-35', [20, 15]],
  ['35-50', [34, 30]],
  ['50-65', [26, 28]],
  ['65+', [20, 27]]
];
ageGroups.forEach(function(group) {
    var label = group[0],
      today = group[1][0],
      future = group[1][1];
    console.log(label, today, future);
});
</code></pre>
      </section>
      <section>
        <h2>Nested arrays</h2>
        <pre><code class="language-javascript">// ES6
var ageGroups = [
  ['18-35', [20, 15]],
  ['35-50', [34, 30]],
  ['50-65', [26, 28]],
  ['65+', [20, 27]]
];
ageGroups.forEach(function([label, [today, future]]) {
  console.log(`The ${label} age group makes up
  ${today}% today, and ${future}% in the future`);
});</code></pre>
        <!-- Show demo in FF-->
        <!-- Show Babel compilation-->
      </section>
      <section>
        <h2>Destructuring objects<br>{} = {};</h2>
      </section>
      <section>
        <h2>Destructuring objects</h2>
        <pre class="bullet"><code class="language-javascript">var data = { fruit: 'apple', vegetable: 'zucchini' };</code></pre>
        <pre class="bullet"><code class="language-javascript">var { fruit, vegetable } = data;</code></pre>
        <pre class="bullet"><code class="language-javascript">var { fruit: f, vegetable: v } = data;</code></pre>
        <!-- Show in Firefox-->
      </section>
      <section>
        <h2>Default values</h2>
        <pre class="bullet"><code class="language-javascript">var data = { fruit: 'apple' };</code></pre>
        <pre class="bullet"><code class="language-javascript">var { fruit: f, vegetable: v = 'potato' } = data;</code></pre>
        <pre class="bullet"><code class="language-javascript">var {
  fruit: f,
  vegetable: v = 'potato'
} = data;</code></pre>
        <!-- The default is used when the value is undefined.-->
      </section>
      <section>
        <h2>Destructuring in function parameters</h2>
        <pre class="bullet"><code class="language-javascript">var callServer = function({ url, method = 'GET' }) {
  console.log(`Make ${method} call to ${url}`);
};

callServer({ url: '/transactions' });
</code></pre>
      </section>
      <section>
        <h2>Nested objects</h2>
        <pre class="bullet"><code class="language-javascript">var drawCircle = function ({
  point: {
    x: pointX = 10,
    y: pointY = 10
  } = {},
  radius = 25
}) {
  console.log(pointX, pointY, radius);
};

drawCircle({
  point: { x: 20, y: 20 },
  radius: 35
});

drawCircle({
  point: { x: 20 },
  radius: 35
});

drawCircle({
  radius: 35
});
</code></pre>
      </section>
      <section>
        <h2>Resources</h2>
        <ul>
          <li><a href="https://kangax.github.io/compat-table/es6/">ES6 compatibility table</a></li>
          <li><a href="http://babeljs.io/">Babel (compiler)</a></li>
          <li><a href="https://github.com/vast/middleman-es6">Middleman ES6</a></li>
        </ul>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>